if(_&&_.clone&&Backbone&&Backbone.Events){var envoy=_.clone(Backbone.Events);envoy._offers={};envoy.offer=function(e,t,n){envoy._offers[e]=envoy._offers[e]||[];envoy._offers[e].push({callback:t,namespace:n||undefined})};envoy.withdraw=function(e,t){if(_.size(envoy._offers[e])<=0){return undefined}var n=false;t=t||undefined;_.each(envoy._offers[e],function(r,i){if(r.namespace===t){n=true;envoy._offers[e].splice(i,1)}});if(_.size(envoy._offers[e])<=0){delete envoy._offers[e]}return n};envoy.solicit=function(e){if(_.size(envoy._offers[e])<=0){return undefined}var t=Array.prototype.slice.call(arguments,1,4);var n=_.find(t,function(e){return typeof e==="boolean"});var r=_.find(t,function(e){return typeof e==="string"});var i=_.find(t,function(e){return typeof e==="function"});var s=[];_.every(envoy._offers[e],function(e,t){if(r===undefined||r===e.namespace){if(typeof e.callback==="function"){s.push(e.callback())}else{s.push(e.callback)}if(n){return false}}return true});if(i){return i(s)}else{return s}};window.envoy=envoy}