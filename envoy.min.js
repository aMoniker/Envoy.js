if(_&&_.clone&&Backbone&&Backbone.Events){var envoy=_.clone(Backbone.Events);envoy._offers={},envoy.offer=function(e,n,o){envoy._offers[e]=envoy._offers[e]||[],envoy._offers[e].push({callback:n,namespace:o||void 0})},envoy.withdraw=function(e,n){if(0>=_.size(envoy._offers[e]))return void 0;var o=!1;if(n=n||void 0,void 0===n)delete envoy._offers[e];else{var r=[];_.each(envoy._offers[e],function(f,t){f.namespace===n?o=!0:r.push(envoy._offers[e][t])}),envoy._offers[e]=r,0>=_.size(envoy._offers[e])&&delete envoy._offers[e]}return o},envoy.solicit=function(e){if(0>=_.size(envoy._offers[e]))return void 0;var n=Array.prototype.slice.call(arguments,1,4),o=_.find(n,function(e){return"boolean"==typeof e}),r=_.find(n,function(e){return"string"==typeof e}),f=_.find(n,function(e){return"function"==typeof e}),t=[];return _.every(envoy._offers[e],function(e){return void 0!==r&&r!==e.namespace||("function"==typeof e.callback?t.push(e.callback()):t.push(e.callback),!o)?!0:(t=t[0],!1)}),f?f(t):t},envoy._storage={},envoy.store=function(e,n){return envoy._storage[e]=n,n},envoy.fetch=function(e){return envoy._storage[e]},envoy.rouse=function(e){return envoy._rouseVal(envoy._storage[e])},envoy._rouseVal=function(e){var n,o;return _.isFunction(e)?n=e():(o=_.isArray(e)||_.isObject(e))?(n=o?[]:{},_.each(e,function(e,o){n[o]=envoy._rouseVal(e)})):n=e,n},envoy.erase=function(e){return delete envoy._storage[e],!0};var global_object="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:{};global_object.envoy=envoy}