if(_&&_.clone&&Backbone&&Backbone.Events){var envoy=_.clone(Backbone.Events);envoy._offers={},envoy.offer=function(e,o,n){envoy._offers[e]=envoy._offers[e]||[],envoy._offers[e].push({callback:o,namespace:n||void 0})},envoy.withdraw=function(e,o){if(0>=_.size(envoy._offers[e]))return void 0;var n=!1;if(o=o||void 0,void 0===o)delete envoy._offers[e];else{var f=[];_.each(envoy._offers[e],function(r,t){r.namespace===o?n=!0:f.push(envoy._offers[e][t])}),envoy._offers[e]=f,0>=_.size(envoy._offers[e])&&delete envoy._offers[e]}return n},envoy.solicit=function(e){if(0>=_.size(envoy._offers[e]))return void 0;var o=Array.prototype.slice.call(arguments,1,4),n=_.find(o,function(e){return"boolean"==typeof e}),f=_.find(o,function(e){return"string"==typeof e}),r=_.find(o,function(e){return"function"==typeof e}),t=[];return _.every(envoy._offers[e],function(e){return void 0!==f&&f!==e.namespace||("function"==typeof e.callback?t.push(e.callback()):t.push(e.callback),!n)?!0:(t=t[0],!1)}),r?r(t):t},envoy._storage={},envoy.store=function(e,o){envoy._storage[e]=o},envoy.fetch=function(e){return envoy._storage[e]},envoy.erase=function(e){return delete envoy._storage[e],!0};var global_object="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:{};global_object.envoy=envoy}